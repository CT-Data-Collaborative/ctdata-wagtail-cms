{% extends "ctdata/__no_sidebar.html" %}
{% load ctdata_tags wagtailcore_tags wagtailimages_tags static %}

{% block centered_content %}
    <div class="row">
        <div class="col-sm-10 offset-sm-1 col-md-8 offset-md-1">
            <div class="row">
                <div class="col-xs-12 col-lg-8">
                    <h2>About the Data Academy</h2>
                    {% if page.body %}
                        {% include "ctdata/includes/streamfield.html" with content=page.body %}
                    {% endif %}
                </div>
                <div class="col-xs-12 col-lg-4">
                    <h2>Upcoming Events</h2>
                    {% if events %}
                        <div class="list-group">
                            {% for event in events %}
                                <div class="event">
                                    <h4 class="media-heading">
                                        {% if event.event_type = 'live' %}
                                            <i class="fa fa-desktop"> </i>
                                        {% else %}
                                            <i class="fa fa-users"> </i>
                                        {% endif %} {{ event.title | title }}
                                    </h4>
                                    <p><strong>{{ event.date_from }}{% if event.date_to %} to {{ event.date_to }}{% endif %}</strong></p>
                                    {% if event.search_description %}
                                        <p>{{ event.search_description }}</p>
                                    {% endif %}
                                    <a href="{% pageurl event %}">See full event description</a>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p>No events currently scheduled</p>
                    {% endif %}
                    <a href="{% pageurl event_index %}">See all events</a>
                </div>
                <!-- /.col-xs-12 col-md-4 -->
                <!-- /.col-xs-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-xs-10 offset-xs-1 col-md-4 offset-md-0">
                    <h3>Explore Resources</h3>
                    {{ page.explore_resources_text | richtext }}
                    <a class='btn ctdata-btn' href="{% pageurl resource_index %}">Explore all resources</a>
                </div>
                <!-- /.col-xs-4 -->
                <div class="col-xs-10 offset-xs-1 col-md-4 offset-md-0">
                    <h3>Browse by Category</h3>
                    {{ page.category_list_text | richtext }}
                    <div class="tag-link-list tag-link-list--tall">
                        {% for tag in tags %}
                            <div class="tag-link tag-link--data-academy ">
                                <a href="/categories/{{ tag.name }}/">{{ tag | title }}</a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <!-- /.col-xs-4 -->
                <div class="col-xs-10 offset-xs-1 col-md-3 offset-md-0">
                    <h3>Showcase</h3>
                    {{ page.showcase_text | richtext }}
                </div>
            </div>
            <!-- /.row -->
        </div>
        <div class="col-sm-10 offset-sm-1 col-md-2 offset-md-0">
            {% include 'ctdata/includes/twitter.html' %}
        </div>
    </div>
    <!-- /.row -->
{% endblock %}

{% block extra_js %}
    <script>
        !function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
            if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = p + "://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);
            }
        }(document, "script", "twitter-wjs");
    </script>
{% endblock %}

